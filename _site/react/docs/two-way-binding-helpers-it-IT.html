<p><code>ReactLink</code> è una maniera semplice di esprimere binding bidirezionali con React.</p>

<blockquote>
<p>Nota:</p>

<p>Se hai poca esperienza del framework, nota che <code>ReactLink</code> non è necessario per molte applicazioni e dovrebbe essere utilizzato con cautela.</p>
</blockquote>

<p>In React, i dati fluiscono in una direzione: dal proprietario ai figli. Questo poiché i dati fluiscono in una sola direzione nel <a href="https://en.wikipedia.org/wiki/Von_Neumann_architecture">modello di computazione di Von Neumann</a>. Puoi pensare ad esso come &quot;binding unidirezionale dei dati.&quot;</p>

<p>Tuttavia, esistono parecchie applicazioni che richiedono di leggere dati e farli fluire nuovamente nel tuo programma. Ad esempio, quando sviluppi dei moduli, vorrai spesso aggiornare uno <code>state</code> di React quando ricevi un input dall&#39;utente. O forse vuoi effettuare il layout in JavaScript e reagire ai cambiamenti nelle dimensioni di alcuni elementi DOM.</p>

<p>In React, questo verrebbe implementato ascoltando un evento &quot;change&quot;, leggendo la tua fonte di dati (solitamente il DOM) e chiamando <code>setState()</code> su uno dei tuoi componenti. &quot;Chiudere il ciclo del flusso dei dati&quot; esplicitamente conduce a programmi più comprensibili e mantenibili. Consulta <a href="/react/docs/forms.html">la nostra documentazione sui moduli</a> per maggiori informazioni.</p>

<p>Il binding bidirezionale -- assicurarsi implicitamente che alcuni valori nel DOM siano sempre consistenti con degli <code>state</code> in  React -- è più conciso e supporta un&#39;ampia varietà di applicazioni. Abbiamo fornito <code>ReactLink</code>: zucchero sintattico per impostare il pattern del ciclo del flusso di dati descritto in predecenza, ovvero &quot;collegare&quot; una fonte di dati con lo <code>state</code> di React.</p>

<blockquote>
<p>Nota:</p>

<p><code>ReactLink</code> è soltanto uno strato di astrazione e convenzioni attorno al pattern <code>onChange</code>/<code>setState()</code>. Non cambia fondamentalmente la maniera in cui i dati fluiscono all&#39;interno della tua applicazione React.</p>
</blockquote>
<h2><a class="anchor" name="reactlink-prima-e-dopo"></a>ReactLink: Prima e Dopo <a class="hash-link" href="#reactlink-prima-e-dopo">#</a></h2>
<p>Ecco un semplice esempio di modulo che non utilizza <code>ReactLink</code>:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">NoLink</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createClass</span><span class="p">({</span>
  <span class="nx">getInitialState</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span><span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;Ciao!&#39;</span><span class="p">};</span>
  <span class="p">},</span>
  <span class="nx">handleChange</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span><span class="nx">message</span><span class="o">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">});</span>
  <span class="p">},</span>
  <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">message</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">message</span><span class="p">;</span>
    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">message</span><span class="p">}</span> <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span><span class="p">}</span> <span class="o">/&gt;</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>Ciò funziona molto bene e il flusso di dati è molto chiaro. Tuttavia, in presenza di un gran numero di campi del modulo può risultare assai prolisso. Utilizziamo <code>ReactLink</code> per risparmiarci la scrittura di un po&#39; di codice:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">WithLink</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createClass</span><span class="p">({</span>
  <span class="nx">mixins</span><span class="o">:</span> <span class="p">[</span><span class="nx">React</span><span class="p">.</span><span class="nx">addons</span><span class="p">.</span><span class="nx">LinkedStateMixin</span><span class="p">],</span>
  <span class="nx">getInitialState</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span><span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;Ciao!&#39;</span><span class="p">};</span>
  <span class="p">},</span>
  <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span> <span class="nx">valueLink</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">linkState</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">)}</span> <span class="o">/&gt;</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p><code>LinkedStateMixin</code> aggiunge un metodo chiamato <code>linkState()</code> al tuo componente React. <code>linkState()</code> restituisce un oggetto <code>ReactLink</code> contenente il valore attuae dello stato React e una callback per cambiarlo.</p>

<p>Gli oggetti <code>ReactLink</code> possono essere passati su e giù nell&#39;albero come proprietà, quindi è facile (ed esplicito) impostare un binding bidirezionale tra un componente in profondità nella gerarchia e dello stato che si trova più in alto nella gerarchia.</p>

<p>Nota che i checkbox hanno un comportamento speciale riguardo il loro attributo <code>value</code>, che è il valore che sarà inviato all&#39;inoltro del modulo se il checkbox è spuntato (il valore predefinito è <code>on</code>). L&#39;attributo <code>value</code> non è aggiornato quando il checkbox viene spuntato o deselezionato. Per i checkbox occorre usare <code>checkedLink</code> anziché <code>valueLink</code>:
<code>
&lt;input type=&quot;checkbox&quot; checkedLink={this.linkState(&#39;booleanValue&#39;)} /&gt;
</code></p>
<h2><a class="anchor" name="dietro-le-quinte"></a>Dietro le Quinte <a class="hash-link" href="#dietro-le-quinte">#</a></h2>
<p>Ci sono due ambiti in <code>ReactLink</code>: il posto in cui crei l&#39;istanza di <code>ReactLink</code> e il posto in cui la utilizzi. Per dimostrare quanto sia semplice usare <code>ReactLink</code>, riscriviamo ciascun ambito separatamente perché sia più esplicito.</p>
<h3><a class="anchor" name="reactlink-senza-linkedstatemixin"></a>ReactLink Senza LinkedStateMixin <a class="hash-link" href="#reactlink-senza-linkedstatemixin">#</a></h3><div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">WithoutMixin</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createClass</span><span class="p">({</span>
  <span class="nx">getInitialState</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span><span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;Ciao!&#39;</span><span class="p">};</span>
  <span class="p">},</span>
  <span class="nx">handleChange</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">newValue</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span><span class="nx">message</span><span class="o">:</span> <span class="nx">newValue</span><span class="p">});</span>
  <span class="p">},</span>
  <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">valueLink</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">value</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">message</span><span class="p">,</span>
      <span class="nx">requestChange</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span> <span class="nx">valueLink</span><span class="o">=</span><span class="p">{</span><span class="nx">valueLink</span><span class="p">}</span> <span class="o">/&gt;</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>Come puoi vedere, gli oggetti <code>ReactLink</code> sono semplici oggetti che hanno due proprietà: <code>value</code> e <code>requestChange</code>. <code>LinkedStateMixin</code> è altrettanto semplice: popola semplicemente questi campi con un valore da <code>this.state</code> e una callback che invoca <code>this.setState()</code>.</p>
<h3><a class="anchor" name="reactlink-senza-valuelink"></a>ReactLink Senza valueLink <a class="hash-link" href="#reactlink-senza-valuelink">#</a></h3><div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">WithoutLink</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createClass</span><span class="p">({</span>
  <span class="nx">mixins</span><span class="o">:</span> <span class="p">[</span><span class="nx">React</span><span class="p">.</span><span class="nx">addons</span><span class="p">.</span><span class="nx">LinkedStateMixin</span><span class="p">],</span>
  <span class="nx">getInitialState</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span><span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;Ciao!&#39;</span><span class="p">};</span>
  <span class="p">},</span>
  <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">valueLink</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">linkState</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">handleChange</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">valueLink</span><span class="p">.</span><span class="nx">requestChange</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">valueLink</span><span class="p">.</span><span class="nx">value</span><span class="p">}</span> <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="nx">handleChange</span><span class="p">}</span> <span class="o">/&gt;</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>La proprietà <code>valueLink</code> è anche abbastanza semplice. Gestisce semplicemente l&#39;evento <code>onChange</code> e invoca <code>this.props.valueLink.requestChange()</code>, e inoltre utilizza <code>this.props.valueLink.value</code> anziché <code>this.props.value</code>. Tutto qua!</p>
