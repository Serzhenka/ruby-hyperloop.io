<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv='X-UA-Compatible' content='IE=edge;chrome=1' />
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="google-site-verification" content="qjqVOvRhHfsuDbLOvaAnj2mkUZJ9Xwzg84TMVXduvUc" />

    <meta charset="UTF-8">
    <title>Hyperloop</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>

    <link href="/stylesheets/base.css" rel="stylesheet" />
    <link href="/stylesheets/normalize.css" rel="stylesheet" />
    <link href="/stylesheets/stylesheet.css" rel="stylesheet" />
    <link href="/stylesheets/github-light.css" rel="stylesheet" />

    <title>Reactrb</title>
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" />

    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="57x57" href="/images/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/images/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/images/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/images/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/images/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/images/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/images/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/images/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/images/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/images/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

  </head>

  <body>
      <section class="page-header">
        <img src="/images/hyperloop_white.svg" width="200" alt="Hyperloop white" />
        <h1 class="project-name">
          <a href="/" class="btn-logo">Hyperloop</a>
        </h1>
        <h2 class="project-tagline">THE MISSING RUBY FRONT-END LIBRARY</h2>
        <a href="/get_started" class="btn">Get Started</a>
        <a href="/tutorials/chat_app" class="btn">Tutorials</a>
        <a href="/installation" class="btn">Installation</a>
        <a href="/gems" class="btn">Gems</a>
        <a href="https://github.com/reactrb" class="btn">Github</a>
        <a href="/tools" class="btn">Tooling</a>
        <a href="/docs/dsl_overview" class="btn">Docs</a>
        <a href="/support" class="btn">Support</a>
        <a href="/blog" class="btn">Blog</a>
      </section>

      <section class="main-nav">
          <a href="/tutorials/chat_app">Chat-App Tutorial</a></br>
  <a href="/tutorials/rails">Reactrb and Rails</a></br>
  <a href="/tutorials/react_components">React Components</a></br>
  <a href="/tutorials/reactive_record">Reactive Record</a></br>
  <a href="/tutorials/synchromesh">Synchromesh</a></br>

      </section>

      <section class="main-content">
        <h2 id="working-with-react-components">Working with React components</h2>

<p><a href="https://github.com/barriehadfield/reactrb-showcase">The source code to this tutorial is here</a></p>

<p>It is time to reap some of the rewards from all the hard work above. We have everything setup so we can easily add front end components and work with them in Reactrb. Lets jump in and add a native React component that plays a video.</p>

<p><a href="https://github.com/CookPete/rplayr">We are going to use Pete Cook&rsquo;s React rplayr</a></p>

<p>First let&rsquo;s install the component via NPM:
<code>text
npm install react-player --save
</code></p>

<p>Next we need to <code>require</code> it in <code>webpack/client_and_server.js</code>
<code>javascript
ReactPlayer = require(&#39;react-player&#39;)
</code></p>

<p>Next run webpack so it can be bundled
<code>text
webpack
</code></p>

<p>And then finally let&rsquo;s add it to our Show component:
<code>ruby
def render
  div do
    ReactPlayer(url:  &#39;https://www.youtube.com/embed/FzCsDVfPQqk&#39;,
      playing: true
    )
  end
end
</code></p>

<p>Refresh your browser and you should have a video. How simple was that!</p>

<h2 id="working-with-react-bootstrap">Working with React Bootstrap</h2>

<p><a href="https://react-bootstrap.github.io/">We will be using React Bootstrap which is a native React library</a></p>

<p>The main purpose for React Bootstrap is that it abstracts away verbose HTML &amp; CSS code into React components which makes it a lot cleaner for React JSX developers. One of the very lovely things about Reactrb is that we already work in beautiful Ruby. To emphasise this point, consider the following:</p>

<p>Sample 1 - In HTML (without React Bootstrap):</p>
<pre class="highlight plaintext"><code>&lt;button id="something-btn" type="button" class="btn btn-success btn-sm"&gt;
  Something
&lt;/button&gt;
$('#something-btn').click(someCallback);
</code></pre>
<p>Sample 2 - In JSX (with React Bootstrap components):</p>
<pre class="highlight plaintext"><code>&lt;Button bsStyle="success" bsSize="small" onClick={someCallback}&gt;
  Something
&lt;/Button&gt;
</code></pre>
<p>Sample 3 - In Reactrb (without React Bootstrap):</p>
<pre class="highlight plaintext"><code>button.btn_success.btn_sm {'Something'}.on(:click) do
    someMethod
end
</code></pre>
<p>Sample 4 - In Reactrb (with React Bootstrap):</p>
<pre class="highlight plaintext"><code>Bs.Button(bsStyle: 'success' bsSize: "small") {'Something'}.on(:click) do
    someMethod
end
</code></pre>
<p>As you can see, sample 3 &amp; 4 are not that different and as a Reactrb developer, I actually prefer sample 3. If I were a JavaScript or JSX developer I would completely understand the advantage of abstracting Bootstrap CSS into React Components so I don&rsquo;t have to work directly with CSS and JavaScript but this is not the case with Reactrb as CSS classes are added to HTML elements with simple dot notation:</p>
<pre class="highlight plaintext"><code>span.pull_right {}
</code></pre>
<p>compiles to (note the conversion from _ to -)</p>
<pre class="highlight plaintext"><code>&lt;span class='pull-right'&gt;&lt;/span&gt;
</code></pre>
<p>So I hear you ask: why if I prefer the non-React Bootstrap syntax why am worrying about React Bootstrap? For one very simple reason: components like Navbar and Modal that requires <code>bootstrap.js</code> will not work with React on it&rsquo;s own so without the React Bootstrap project you would need to implement all that functionality yourself. The React Bootstrap project has re-implemented all this functionality as React components.</p>

<p>Lets implement a Navbar in this project using React Bootstrap in Reactrb. First, we need to install Bootstrap and React Bootstrap:</p>
<pre class="highlight plaintext"><code>npm install bootstrap react-bootstrap --save
</code></pre>
<p>Note: The <code>--save</code> option will update the package.json file.</p>

<p>And then we need to <code>require</code> it in <code>webpack/client_and_server.js</code> by adding this line:
<code>javascript
ReactBootstrap = require(&#39;react-bootstrap&#39;)
</code>
Run the <code>webpack</code> command again, and restart your rails server.</p>

<p>If you refresh your browser now and open the JavaScript console we will be able to interact with React Bootstrap by typing:</p>

<p>In the JavaScript console type: <code>ReactBootstrap</code></p>

<p>and you will see the ReactBootstrap object with all its components like Accordion, Alert, Badge, Breadcrumb, etc. This is great news, React Bootstrap is installed and ready to use. Accessing the JavaScript object in this way is a really great way to see what you have to work with. Sometimes the documentation of a component is not as accurate as actually seeing what you have in the component itself.</p>

<p>To make sure everything is working lets add a <em>Button</em> to our our Show component like this:</p>
<pre class="highlight ruby"><code><span class="k">module</span> <span class="nn">Components</span>
  <span class="k">module</span> <span class="nn">Home</span>
    <span class="k">class</span> <span class="nc">Show</span> <span class="o">&lt;</span> <span class="no">React</span><span class="o">::</span><span class="no">Component</span><span class="o">::</span><span class="no">Base</span>
      <span class="k">def</span> <span class="nf">render</span>
        <span class="no">ReactBootstrap</span><span class="o">::</span><span class="no">Button</span><span class="p">(</span><span class="ss">bsStyle: </span><span class="s1">'success'</span><span class="p">,</span> <span class="ss">bsSize: </span><span class="s2">"small"</span><span class="p">)</span> <span class="k">do</span>
          <span class="s1">'Success'</span>
        <span class="k">end</span><span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="ss">:click</span><span class="p">)</span> <span class="k">do</span>
          <span class="n">alert</span><span class="p">(</span><span class="s1">'you clicked me!'</span><span class="p">)</span>
        <span class="k">end</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<p>Notice that we reference <code>ReactBoostrap</code> in ruby using the same identifer that was in the require statement in our <code>client_and_server.js</code> webpack bundle.  The first time Reactrb hits the <code>ReactBootstrap</code> constant it will not be defined. This triggers a search of the javascript name space for something that looks either like a component or library of components.  It then defines the appropriate module or component class wrapper in ruby.</p>

<p>Visit your page and if all is well you will see a clickable button.  However it will not have any styles.  This is because ReactBootstrap does not automatically depend on any particular style sheet, so we will have to supply one.  An easy way to do this is to just copy the css file from the bootstrap repo, and stuff it our rails assets directory, however with a little upfront work we can setup webpack to do it all for us.</p>

<p>First lets add four webpack <em>loaders</em> using npm:
<code>text
npm install css-loader file-loader style-loader url-loader --save-dev
</code>
Notice we use <code>--save-dev</code> instead of just <code>--save</code> as these packages are only used in the development process.</p>

<p>Now edit your <code>webpack.config.js</code> file, and update the loaders section so it looks like this:</p>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"path"</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
<span class="p">...</span>
    <span class="na">module</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">loaders</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span> <span class="na">test</span><span class="p">:</span> <span class="sr">/</span><span class="se">\.</span><span class="sr">css$/</span><span class="p">,</span>
          <span class="na">loader</span><span class="p">:</span> <span class="s2">"style-loader!css-loader"</span>
        <span class="p">},</span>
        <span class="p">{</span> <span class="na">test</span><span class="p">:</span> <span class="sr">/</span><span class="se">\.(</span><span class="sr">woff|woff2</span><span class="se">)(\?</span><span class="sr">v=</span><span class="se">\d</span><span class="sr">+</span><span class="se">\.\d</span><span class="sr">+</span><span class="se">\.\d</span><span class="sr">+</span><span class="se">)?</span><span class="sr">$/</span><span class="p">,</span>
          <span class="na">loader</span><span class="p">:</span> <span class="s1">'url?limit=10000&amp;mimetype=application/font-woff'</span>
        <span class="p">},</span>
        <span class="p">{</span> <span class="na">test</span><span class="p">:</span> <span class="sr">/</span><span class="se">\.</span><span class="sr">ttf</span><span class="se">(\?</span><span class="sr">v=</span><span class="se">\d</span><span class="sr">+</span><span class="se">\.\d</span><span class="sr">+</span><span class="se">\.\d</span><span class="sr">+</span><span class="se">)?</span><span class="sr">$/</span><span class="p">,</span>
          <span class="na">loader</span><span class="p">:</span> <span class="s1">'url?limit=10000&amp;mimetype=application/octet-stream'</span>
        <span class="p">},</span>
        <span class="p">{</span> <span class="na">test</span><span class="p">:</span> <span class="sr">/</span><span class="se">\.</span><span class="sr">eot</span><span class="se">(\?</span><span class="sr">v=</span><span class="se">\d</span><span class="sr">+</span><span class="se">\.\d</span><span class="sr">+</span><span class="se">\.\d</span><span class="sr">+</span><span class="se">)?</span><span class="sr">$/</span><span class="p">,</span>
          <span class="na">loader</span><span class="p">:</span> <span class="s1">'file'</span>
        <span class="p">},</span>
        <span class="p">{</span> <span class="na">test</span><span class="p">:</span> <span class="sr">/</span><span class="se">\.</span><span class="sr">svg</span><span class="se">(\?</span><span class="sr">v=</span><span class="se">\d</span><span class="sr">+</span><span class="se">\.\d</span><span class="sr">+</span><span class="se">\.\d</span><span class="sr">+</span><span class="se">)?</span><span class="sr">$/</span><span class="p">,</span>
          <span class="na">loader</span><span class="p">:</span> <span class="s1">'url?limit=10000&amp;mimetype=image/svg+xml'</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">},</span>
<span class="p">...</span>
<span class="p">};</span>
</code></pre>
<p>We have set webpack up so that when a css file is required it uses the style loader to process the file.  Because the bootstrap css file will require font face files, we also have 4 font loaders.  All this will package up everything when we require any css file.</p>

<p>Now we are ready to require CSS files, and have webpack build a complete bundle including the css and any fonts referenced.</p>

<p>To bundle in the bootstrap css file add this line to <code>webpack/client_only.js</code>
<code>javascript
require(&#39;bootstrap/dist/css/bootstrap.css&#39;);
</code></p>

<p>And install the bootstrap package
<code>text
npm install bootstrap --save
</code></p>

<p>Now run <code>webpack</code> to update our bundles, and restart your server.  Now our button is properly styled you should be rewarded with a nice Bootstrap styled green Success Button.</p>

<p>Now that everything is loaded, lets update our component to use a few more of the Bootstrap components.  Update your Show component so that it looks like this:</p>
<pre class="highlight ruby"><code><span class="k">module</span> <span class="nn">Components</span>
  <span class="k">module</span> <span class="nn">Home</span>
    <span class="k">class</span> <span class="nc">Show</span> <span class="o">&lt;</span> <span class="no">React</span><span class="o">::</span><span class="no">Component</span><span class="o">::</span><span class="no">Base</span>

      <span class="k">def</span> <span class="nf">say_hello</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">alert</span> <span class="s2">"Hello from number </span><span class="si">#{</span><span class="n">i</span><span class="si">}</span><span class="s2">"</span>
      <span class="k">end</span>

      <span class="k">def</span> <span class="nf">render</span>
        <span class="n">div</span> <span class="k">do</span>
          <span class="no">ReactBootstrap</span><span class="o">::</span><span class="no">Navbar</span><span class="p">(</span><span class="ss">bsStyle: :inverse</span><span class="p">)</span> <span class="k">do</span>
            <span class="no">ReactBootstrap</span><span class="o">::</span><span class="no">Nav</span><span class="p">()</span> <span class="k">do</span>
              <span class="no">ReactBootstrap</span><span class="o">::</span><span class="no">NavbarBrand</span><span class="p">()</span> <span class="k">do</span>
                <span class="n">a</span><span class="p">(</span><span class="ss">href: </span><span class="s1">'#'</span><span class="p">)</span> <span class="p">{</span> <span class="s1">'Reactrb Showcase'</span> <span class="p">}</span>
              <span class="k">end</span>
              <span class="no">ReactBootstrap</span><span class="o">::</span><span class="no">NavDropdown</span><span class="p">(</span>
                <span class="ss">eventKey: </span><span class="mi">1</span><span class="p">,</span>
                <span class="ss">title: </span><span class="s1">'Things'</span><span class="p">,</span>
                <span class="ss">id: :drop_down</span>
              <span class="p">)</span> <span class="k">do</span>
                <span class="p">(</span><span class="mi">1</span><span class="p">.</span><span class="nf">.</span><span class="mi">5</span><span class="p">).</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">n</span><span class="o">|</span>
                  <span class="no">ReactBootstrap</span><span class="o">::</span><span class="no">MenuItem</span><span class="p">(</span><span class="ss">href: </span><span class="s1">'#'</span><span class="p">,</span>
                    <span class="ss">key: </span><span class="n">n</span><span class="p">,</span>
                    <span class="ss">eventKey: </span><span class="s2">"1.</span><span class="si">#{</span><span class="n">n</span><span class="si">}</span><span class="s2">"</span>
                  <span class="p">)</span> <span class="k">do</span>
                    <span class="s2">"Number </span><span class="si">#{</span><span class="n">n</span><span class="si">}</span><span class="s2">"</span>
                  <span class="k">end</span><span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="ss">:click</span><span class="p">)</span> <span class="p">{</span> <span class="n">say_hello</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="p">}</span>
                <span class="k">end</span>
              <span class="k">end</span>
            <span class="k">end</span>
          <span class="k">end</span>
          <span class="n">div</span><span class="p">.</span><span class="nf">container</span> <span class="k">do</span>
            <span class="no">ReactPlayer</span><span class="p">(</span><span class="ss">url: </span><span class="s1">'https://www.youtube.com/embed/FzCsDVfPQqk'</span><span class="p">,</span>
              <span class="ss">playing: </span><span class="kp">true</span>
            <span class="p">)</span>
          <span class="k">end</span>
        <span class="k">end</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<p>A few things to notice in the code above:</p>

<p>We add React Bootstrap components simply by <code>ReactBootstrap::Name</code> where <code>Name</code> is the JavaScriot component you want to render. All the components are documented in the React Bootstrap <a href="https://react-bootstrap.github.io/components.html">documentation</a></p>

<p>See with <code>div.container</code> we are mixing in CSS style which will compile into <code>&lt;div class=&#39;container&#39;&gt;</code></p>

<p>Also notice how I have added an <code>.on(:click)</code> event handler to the <code>MenuItem</code> component while setting <code>href: &#39;#&#39;</code> as this will allow us to handle the event instead of navigating to a new page.</p>

<p>So far we have a very basic application which is looking OK and showing a video. Time to do something a little more interesting. How about if we add Post and Comment functionality which will let us explore Reactive Record!</p>

      </section>


  </body>
</html>
